{%extends 'bash.html'%}





{%block head%}
<link rel="stylesheet" href="/static/style/login.css" type="text/css">
<link rel="stylesheet" href="/static/style/footer.css" type="text/css">


<script type="text/javascript">
    $(function(){
        // 生成随机数函数
        function getRandom(n){
        return Math.floor(Math.random()*n+1)
        };
        // 绑定点击事件,更新src参数
        $('#yzm').click(function(){
            var b = getRandom(100);
           $('#new_yzm').attr('src','/user/api/regist_yz?a='+b+'/');
        });
    });

</script>

{%endblock%}

{%block body%}
<!-- 登录主体部分start -->
	<div class="login w990 bc mt10 regist">
		<div class="login_hd">
			<h2>用户注册</h2>
			<b></b>
		</div>
		<div class="login_bd">
			<div class="login_form fl">

				<form action="/user/regist_handler/" method="post">
                    {%csrf_token%}
					<ul>
						<li>
							<label for="">用户名：</label>
							<input type="text" class="txt" name="username" value="{{username|default:''}}"/>
                            {%if u|default:0 == 0%}
							<p>3-20位字符，可由中文、字母、数字和下划线组成</p>
                            {%elif u == 1%}
                            <p style="color:red">用户已经注册</p>
                            {%elif u == 2%}
                             <p style="color:red">输入错误</p>
                            {%endif%}
						</li>
						<li>
							<label for="">密码：</label>
							<input type="password" class="txt" name="password" />
                             {%if p|default:0 == 0 %}
							<p>6-20位字符，可使用字母、数字和符号的组合，不建议使用纯数字、纯字母、纯符号</p>
                            {%elif p == 1%}
                            <p> <span style="color:red">两次密码不一致</p>
                            {%endif%}
						</li>
						<li>
							<label for="">确认密码：</label>
							<input type="password" class="txt" name="password" />
                            <!--context = {"u":1,"p":1,"y":1,"t":1}-->
                            {%if p|default:0 == 0 %}
							<p> <span>请再次输入密码</p>
                            {%elif p == 1%}
                            <p> <span>两次密码不一致</p>
                            {%endif%}
						</li>
						<li class="checkcode">
							<label for="">验证码：</label>
							<input type="text"  name="checkcode" />
							<img src="/user/api/regist_yz?a=1/" alt="" id="new_yzm"/>
                            {%if y|default:0 == 1%}
                            <p> <span style="color:red">验证码错误</p>
                            {%endif%}
							<span>看不清？<a href="javascript:;" id="yzm">换一张</a></span>

						</li>
						<li>
							<label for="">&nbsp;</label>
							<input type="checkbox" class="chb" checked="checked" name="t" value="1"/> 我已阅读并同意《用户注册协议》
						</li>
						<li>
							<label for="">&nbsp;</label>
							<input type="submit" value="" class="login_btn" />
						</li>
					</ul>
				</form>


			</div>

			<div class="mobile fl">
				<h3>手机快速注册</h3>
				<p>中国大陆手机用户，编辑短信 “<strong>XX</strong>”发送到：</p>
				<p><strong>1069099988</strong></p>
			</div>

		</div>
	</div>
	<!-- 登录主体部分end -->


{%endblock body%}